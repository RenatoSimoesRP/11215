========== Environments-cwp.28 ==========Environment refactoring, part 2 of 3: migrate data to new instance variables, change methods to use the new instance variables.